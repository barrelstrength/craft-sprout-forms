{% extends "sprout-forms/_layouts/formsettings" %}
{% import "_includes/forms" as forms %}

{% do view.registerAssetBundle("barrelstrength\\sproutforms\\web\\assets\\integrations\\IntegrationAsset") %}

{% set content %}

    {% if settings.enableIntegrationsPerFormBasis %}

        {% set integrationOptions = craft.sproutForms.getIntegrationOptions() %}

        <div id="sproutforms-integrations-wrapper">

            <table class="data fullwidth" id="sproutforms-conditionalrules-table">
                <thead>
                    <th>{{ "Integration Name"|t('sprout-forms') }}</th>
                    <th class="thin">{{ "Enabled"|t('sprout-forms') }}</th>
                </thead>
                <tbody>
                {% for integration in integrations %}
                    <tr class="field sproutforms-integration-row" id="sproutforms-integration-row-{{ integration.id }}">
                        <td class="heading">
                            <a href="#" id="sproutform-integration-{{ integration.id }}" data-integrationid="{{ integration.id }}">{{ integration.name }}</a>
                        </td>
                        <td>
                            {{ forms.lightswitch({
                                on: integration.enabled,
                                small: true,
                                id: "integration-enabled-"~integration.id,
                                onLabel: "Show"|t('sprout-forms'),
                                offLabel: "Hide"|t('sprout-forms')
                            }) }}
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>

            <div id="sproutforms-integrations-create" class="field" style="padding-top:20px;">
                {{ forms.select({
                    id: 'integrationsOptions',
                    name: 'integrationsOptions',
                    options: integrationOptions
                }) }}
            </div>
        </div>

    {% endif %}

{% endset %}

