{% extends "sprout-forms/_layouts/formsettings" %}
{% import "_includes/forms" as forms %}
{% import "sprout-base-fields/_includes/forms" as sproutFields %}

{% set fullPageForm = true %}

{% set content %}

    <input type="hidden" name="action" value="sprout-forms/forms/save-form">
    {{ redirectInput('sprout-forms/forms/'~form.id~'/settings/general') }}
    <input type="hidden" id="formId" name="formId" value="{{ form.id }}">

    {{ forms.textField({
        first: true,
        label: "Name"|t('sprout-forms'),
        instructions: "What this form will be called in the CP."|t('sprout-forms'),
        id: 'name',
        name: 'name',
        value: form.name,
        errors: form.getErrors('name'),
        autofocus: true,
        required: true
    }) }}

    {{ forms.textField({
        label: "Title Format"|t('sprout-forms'),
        instructions: "Entry Titles are auto-generated based on the Title Format you enter here. All information contained in the Title will also be searchable. You may use the same syntax here as you would with Dynamic Titles in your Sections. (i.e. {dateCreated|date('Ymd')} {fullName})"|t('sprout-forms'),
        id: 'titleFormat',
        name: 'titleFormat',
        value: form.titleFormat,
        errors: form.getErrors('titleFormat'),
        required: true
    }) }}

    {{ forms.textField({
        label: "Handle"|t('sprout-forms'),
        instructions: "How youâ€™ll refer to this form in the templates."|t('sprout-forms'),
        id: 'handle',
        class: 'code',
        name: 'handle',
        value: form.handle,
        errors: form.getErrors('handle'),
        required: true
    }) }}

    <hr>

    {{ forms.lightswitchField({
        label: "Save Data"|t('sprout-forms'),
        instructions: "Save submitted Sprout Form Entries for this form to the Craft database"|t('sprout-forms'),
        id: 'saveData',
        name: 'saveData',
        on: form.saveData,
        onLabel: "Show"|t('sprout-forms'),
        offLabel: "Hide"|t('sprout-forms')
    }) }}

    <hr>

    {% set templateOptions = craft.sproutForms.getTemplateOptions(form) %}

    {{ forms.field({
        label: "Templates"|t('sprout-forms'),
        instructions: "The Form Templates that will be used to output your forms"|t('sprout-forms'),
        required: true,
        errors: (form is defined ? form.getErrors('formTemplate') : null)
    }, sproutFields.selectOther({
        name: 'formTemplate',
        options: templateOptions,
        value: form.formTemplate ?? null,
        otherPlaceholderText: '_forms/formHandle'|t('sprout-forms'),
    })) }}

    {{ forms.lightswitchField({
        label: "Page Titles"|t('sprout-forms'),
        instructions: "Display Page Titles on Forms"|t('sprout-forms'),
        id: 'displaySectionTitles',
        name: 'displaySectionTitles',
        on: form.displaySectionTitles,
        onLabel: "Show"|t('sprout-forms'),
        offLabel: "Hide"|t('sprout-forms')
    }) }}

{% endset %}