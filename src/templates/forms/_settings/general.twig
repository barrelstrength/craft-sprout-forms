{% extends "sprout-forms/_layouts/formsettings" %}
{% import "_includes/forms" as forms %}

{% set content %}

    {{ forms.textField({
        first: (groups is defined and groups|length ? false : true),
        label: "Name"|t('sprout-forms'),
        instructions: "What this form will be called in the CP."|t('sprout-forms'),
        id: 'name',
        name: 'name',
        value: form.name,
        errors: form.getErrors('name'),
        autofocus: true,
        required: true
    }) }}

    {{ forms.textField({
        label: "Handle"|t('sprout-forms'),
        instructions: "How youâ€™ll refer to this form in the templates."|t('sprout-forms'),
        id: 'handle',
        class: 'code',
        name: 'handle',
        value: form.handle,
        errors: form.getErrors('handle'),
        required: true
    }) }}

    {{ forms.textField({
        label: "Title Format"|t('sprout-forms'),
        instructions: "Entry Titles are auto-generated based on the Title Format you enter here. All information contained in the Title will also be searchable. You may use the same syntax here as you would with Dynamic Titles in your Sections. (i.e. {dateCreated|date('Ymd')} {fullName})"|t('sprout-forms'),
        id: 'titleFormat',
        name: 'titleFormat',
        value: form.titleFormat,
        errors: form.getErrors('titleFormat')
    }) }}

    {{ forms.textField({
        label: "Redirect"|t('sprout-forms'),
        instructions: "Where should the user be redirected upon form submission? Leaving blank will redirect user back to the form."|t('sprout-forms'),
        name: 'redirectUri',
        placeholder: siteUrl,
        value: (form is defined ? form.redirectUri : null),
        errors: (form is defined ? form.getErrors('redirectUri') : null)
    }) }}

    {{ forms.textField({
        label: "Button"|t('sprout-forms'),
        instructions: "What the text in the submit button should be."|t('sprout-forms'),
        name: 'submitButtonText',
        placeholder: 'Submit',
        value: (form is defined ? form.submitButtonText : null),
        required: false,
        errors: (form is defined ? form.getErrors('submitButtonText') : null)
    }) }}

    {% if groups is defined and groups|length %}

        {% set groupOptions = [
            { label: 'All Forms'|t('sprout-forms') , value: '*' }
        ] %}
        {% for group in groups %}
            {% set groupOptions = groupOptions|merge([{ label: group.name, value: group.id }]) %}
        {% endfor %}

        {{ forms.selectField({
            first: true,
            label: "Group"|t('sprout-forms'),
            instructions: "Which group should this form be displayed in?"|t('sprout-forms'),
            id: 'groupId',
            name: 'groupId',
            options: groupOptions,
            value: groupId
        }) }}

    {% endif %}

    {{ forms.lightswitchField({
        label: "Page Titles"|t('sprout-forms'),
        instructions: "Display Page Titles on Forms"|t('sprout-forms'),
        id: 'displaySectionTitles',
        name: 'displaySectionTitles',
        on: form.displaySectionTitles,
        small: true,
        onLabel: "Show"|t('sprout-forms'),
        offLabel: "Hide"|t('sprout-forms')
    }) }}

    {% if settings.enableSaveData %}

        {{ forms.lightswitchField({
            label: "Save Data"|t('sprout-forms'),
            instructions: "Save submitted Sprout Form Entries for this form to the Craft database"|t('sprout-forms'),
            id: 'saveData',
            name: 'saveData',
            on: form.saveData,
            small: true,
            onLabel: "Show"|t('sprout-forms'),
            offLabel: "Hide"|t('sprout-forms')
        }) }}

    {% endif %}

    {% if settings.enablePerFormTemplateFolderOverride %}

        {% set templateOptions = craft.sproutForms.getTemplateOptions(form) %}

        {{ forms.field({
            label: "Templates"|t('sprout-forms'),
            instructions: "The Form Templates that will be used to output your forms"|t('sprout-forms'),
            required: true,
            errors: (form is defined ? form.getErrors('templateOverridesFolder') : null)
        }, sproutFields.selectOther({
            name: 'templateOverridesFolder',
            options: templateOptions,
            value: form.templateOverridesFolder ?? null,
            otherPlaceholderText: '_forms/formHandle'|t('sprout-forms'),
        })) }}

    {% endif %}

{% endset %}