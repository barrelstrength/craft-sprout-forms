{% import "_includes/forms" as forms %}
{% import "sprout-base-fields/_includes/forms" as sproutFields %}

<div id="sprout-content">
    {% set conditionalTypeGroups = craft.sproutForms.prepareConditionalTypeSelection() %}

    <input type="hidden" name="formId" value="{{ conditional.formId }}">

    {% if conditional.id %}
        <input type="hidden" id="conditionalId" name="conditionalId" value="{{ conditional.id }}">
    {% endif %}

    {{ forms.lightswitchField({
        label: "Enabled"|t('sprout-forms'),
        name: 'enabled',
        on: conditional.enabled,
        first: true
    }) }}

    {{ forms.textField({
        label: "Conditional Name"|t('sprout-forms'),
        id: 'field-name',
        name: 'name',
        value: (conditional is defined ? conditional.name : null),
        errors: (conditional is defined ? conditional.getErrors('name') : null),
        required: true,
    }) }}

    {% namespace 'settings['~className(conditional)~']' %}
        {{ conditional.getSettingsHtml()|raw }}
    {% endnamespace %}

    {{ forms.selectField({
        label: "Conditional Type <span class='info'>Create a new conditional if you need to update your conditional type. This value cannot be changed.</span>"|t('sprout-forms'),
        id: 'type',
        name: 'selectType',
        hasOptgroups: true,
        options: conditionalTypeGroups,
        value: className(conditional)|e('html'),
        errors: conditional.getErrors('type') ?? null,
        disabled: true
    }) }}

    {{ forms.textField({
        id: 'type',
        name: 'type',
        type: 'hidden',
        value: className(conditional),
        errors: conditional.getErrors('type') ?? null
    }) }}
</div>

{% js %}
    $(document).ready(function() {
    if (Craft.SproutFields != null) {
    Craft.SproutFields.initFields($(".field"));
    }
    });
{% endjs %}
